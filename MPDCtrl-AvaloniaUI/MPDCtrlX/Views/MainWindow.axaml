<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:MPDCtrlX.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:ui="using:FluentAvalonia.UI.Controls"
		xmlns:prop="clr-namespace:MPDCtrlX.Properties"
        xmlns:views="clr-namespace:MPDCtrlX.Views"
		xmlns:mod="clr-namespace:MPDCtrlX.Models"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="MPDCtrlX.Views.MainWindow"
		x:DataType="vm:MainViewModel"
        Icon="/Assets/MPDCtrlX.ico"
        Title="MPDCtrlX"
             x:CompileBindings="True" Cursor="Arrow" >
	<!-- Background="{DynamicResource ThemeBackgroundBrush}" -->
	<!-- <views:MainView/> -->
	<Window.Resources>

	</Window.Resources>
	<Interaction.Behaviors>
		<DataTriggerBehavior Binding="{Binding IsBusy}" ComparisonCondition="Equal" Value="True">
			<ChangePropertyAction PropertyName="Cursor" Value="Wait" />
		</DataTriggerBehavior>
		<DataTriggerBehavior Binding="{Binding IsBusy}" ComparisonCondition="Equal" Value="False">
			<ChangePropertyAction PropertyName="Cursor" Value="Arrow" />
		</DataTriggerBehavior>
		<DataTriggerBehavior Binding="{Binding IsWorking}" ComparisonCondition="Equal" Value="True">
			<ChangePropertyAction PropertyName="Cursor" Value="AppStarting" />
		</DataTriggerBehavior>
		<DataTriggerBehavior Binding="{Binding IsWorking}" ComparisonCondition="Equal" Value="False">
			<ChangePropertyAction PropertyName="Cursor" Value="Arrow" />
		</DataTriggerBehavior>
	</Interaction.Behaviors>
	<Window.KeyBindings>
		<KeyBinding Command="{Binding PlayCommand}" Gesture="Play" />
		<KeyBinding Command="{Binding PlayCommand}" Gesture="Space" />
		<KeyBinding Command="{Binding PlayCommand}" Gesture="Ctrl+P"/>
		<KeyBinding Command="{Binding PlayCommand}" Gesture="MediaPlayPause" />
		<!--
		<KeyBinding Command="{Binding PlayCommand}" Key="MediaStop" />
		<KeyBinding Command="{Binding PlayNextCommand}" Key="MediaNextTrack" />
		<KeyBinding Command="{Binding PlayNextCommand}" Modifiers="Ctrl" Key="N" />
		<KeyBinding Command="{Binding PlayPrevCommand}" Key="MediaPreviousTrack" />
		<KeyBinding Command="{Binding PlayPrevCommand}" Modifiers="Ctrl" Key="B" />
		<KeyBinding Command="{Binding VolumeMuteCommand}" Key="VolumeMute" />
		<KeyBinding Command="{Binding VolumeDownCommand}" Key="VolumeDown" />
		<KeyBinding Command="{Binding VolumeDownCommand}" Modifiers="Ctrl" Key="OemMinus" />
		<KeyBinding Command="{Binding VolumeDownCommand}" Modifiers="Ctrl" Key="Subtract" />
		<KeyBinding Command="{Binding VolumeUpCommand}" Key="VolumeUp" />
		<KeyBinding Command="{Binding VolumeUpCommand}" Modifiers="Ctrl" Key="OemPlus" />
		<KeyBinding Command="{Binding VolumeUpCommand}" Modifiers="Ctrl" Key="Add" />
		<KeyBinding Command="{Binding EscapeCommand}" Key="Esc" />
		<KeyBinding Command="{Binding ShowSettingsCommand}" Modifiers="Ctrl" Key="S"/>
		<KeyBinding Command="{Binding ShowFindCommand}" Modifiers="Ctrl" Key="F"/>
		-->
		<!--
		<KeyBinding Gesture="Alt+D" Command="{Binding DevCenterViewActivation}">
			<KeyBinding.CommandParameter>
				<x:Int32>0</x:Int32>
			</KeyBinding.CommandParameter>
		</KeyBinding>
		-->
	</Window.KeyBindings>

	<Grid RowDefinitions="*,Auto,29">

		<!-- Navigation menu -->
		<ui:NavigationView Grid.Row="0" Name="navigateView" MenuItemsSource="{Binding MainMenuItems, Mode=OneWay}" MenuItemTemplate="{StaticResource NavigationViewMenuItem}" SelectionFollowsFocus="False" ItemInvoked="NavigationView_ItemInvoked" SelectionChanged="NavigationView_SelectionChanged" Loaded="NavigationView_Loaded" IsPaneToggleButtonVisible="True" IsSettingsVisible="True" PaneDisplayMode="Left" OpenPaneLength="260" Margin="0,12,0,0" ScrollViewer.AllowAutoHide="True" CompactModeThresholdWidth="1000" ExpandedModeThresholdWidth="1023" ScrollViewer.VerticalScrollBarVisibility="Visible">
			<ui:NavigationView.Resources>
				<DataTemplate x:Key="NavigationViewMenuItem" x:DataType="mod:NodeMenu">
					<ui:NavigationViewItem MenuItemsSource="{Binding Children}" IsExpanded="{Binding Expanded,Mode=TwoWay}" IsSelected="{Binding Selected, Mode=TwoWay}">

						<ui:NavigationViewItem.Content>
							<StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="-1,0,0,0">
								<Viewbox Width="16" Height="16" Opacity="0.9" HorizontalAlignment="Left">
									<PathIcon Background="Transparent" Width="NaN" Height="NaN" Margin="0" Padding="0"
										Data="{Binding PathIcon}">
									</PathIcon>
								</Viewbox>
								<TextBlock Text="{Binding Name}" Margin="16,0,0,0"></TextBlock>
							</StackPanel>
						</ui:NavigationViewItem.Content>

					</ui:NavigationViewItem>
				</DataTemplate>
			</ui:NavigationView.Resources>

		</ui:NavigationView>

		<!-- Debug Windows -->
		<Grid x:Name="DebugWindow" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" RowDefinitions="8,*" ColumnDefinitions="1*,8,1*" Height="200" IsVisible="{Binding IsShowDebugWindow, Mode=TwoWay}">

			<TextBox x:Name="DebugCommandTextBox" Grid.Row="1" Grid.Column="0" Text="{Binding DebugCommandText, Mode=OneWay}" Background="{DynamicResource LayerFillColorDefaultBrush}" BorderThickness="0" AcceptsReturn="True" Padding="6 0 0 0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" TextWrapping="NoWrap" IsReadOnly="True" IsTabStop="False" Margin="0" MinHeight="24">
			</TextBox>

			<TextBox x:Name="DebugIdleTextBox" Grid.Row="1" Grid.Column="2" Text="{Binding DebugIdleText, Mode=OneWay}" Background="{DynamicResource LayerFillColorDefaultBrush}" BorderThickness="0" AcceptsReturn="True" Padding="6 0 0 0" VerticalAlignment="Stretch" TextWrapping="NoWrap" IsReadOnly="True" IsTabStop="False" Margin="0" MinHeight="24">
			</TextBox>

		</Grid>

		<!-- StatusBar -->
		<Border Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Height="29" Margin="0 0 0 0" BorderThickness="0,1,0,0" BorderBrush="{DynamicResource LayerFillColorDefaultBrush}" Opacity="0.6">

			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
				</Grid.ColumnDefinitions>

				<StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="0 0 0 0">

					<Button Width="18" Height="18" Margin="6,0,6,0" HorizontalAlignment="Left" VerticalAlignment="Center" Background="Transparent" BorderThickness="0" Padding="3" Command="{Binding ShowSettingsCommand}">
						<Viewbox Width="16" Height="16">
							<PathIcon Background="Transparent" Width="NaN" Height="NaN"
								Data="">
							</PathIcon>
						</Viewbox>
					</Button>
					<!-- ConnectionStatusMessage  -->
					<TextBlock Text="{Binding ConnectionStatusMessage}" Margin="6 0 6 0" TextWrapping="NoWrap" IsVisible="False"></TextBlock>

					<!--
					<Viewbox Width="16" Height="16" Margin="2 0 4 0" Opacity="0.7">
						<Canvas Width="24" Height="24">
							<Path Fill="{DynamicResource ControlForegroundColorBrush}" Data="{Binding StatusButton}" />
						</Canvas>
					</Viewbox>

					<ComboBox Style="{StaticResource ComboBoxFlatStyle}" IsEnabled="{Binding IsProfileSwitchOK}" ItemsSource="{Binding Profiles}" SelectedItem="{Binding SelectedQuickProfile}" Foreground="{DynamicResource ControlForegroundColorBrush}" HorizontalAlignment="Center" Tag="">
						<ComboBox.ItemTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<TextBlock Text="{Binding Path=Name}"></TextBlock>
								</StackPanel>
							</DataTemplate>
						</ComboBox.ItemTemplate>
					</ComboBox>
				-->
				</StackPanel>

				<Border Grid.Column="1" Background="Transparent" BorderBrush="{DynamicResource LayerFillColorDefaultBrush}" BorderThickness="0,0,1,0" Opacity="0.5" MaxWidth="4"/>

				<StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="0 0 2 0">

					<!-- Status Error Icon -->
					<!--
					<Viewbox Width="16" Height="16" Margin="0 0 4 0" Opacity="0.7">
						<Canvas Width="24" Height="24">
							<Path Fill="{DynamicResource ControlDarkColorBrush}" Data="{Binding MpdStatusButton}" />
						</Canvas>
					</Viewbox>
					-->
					<!-- Status Error Message -->
					<TextBlock Text="{Binding MpdStatusMessage}" VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin="6 0 6 0" Padding="0" TextWrapping="NoWrap"></TextBlock>

				</StackPanel>

				<Border Grid.Column="3" Background="Transparent" BorderBrush="{DynamicResource LayerFillColorDefaultBrush}" BorderThickness="0,0,1,0" Opacity="0.5" MaxWidth="4"/>

				<StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center" Margin="6 0 6 2">

					<TextBlock Text="{Binding StatusBarMessage}" VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin="6 0 6 0" Padding="0" TextWrapping="NoWrap"></TextBlock>

				</StackPanel>

				<Border Grid.Column="5" Background="Transparent" BorderBrush="{DynamicResource LayerFillColorDefaultBrush}" BorderThickness="0,0,1,0" Opacity="0.5" MaxWidth="4"/>

				<StackPanel Grid.Column="6" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0 0 0 0">

					<Button Width="18" Height="18" Margin="6,0,6,0" HorizontalAlignment="Right" VerticalAlignment="Center" Background="Transparent" BorderThickness="0" Padding="3" Command="{Binding ShowDebugWindowCommand}">
						<Viewbox Width="16" Height="16">
							<PathIcon Background="Transparent" Width="NaN" Height="NaN"
								Data="">
								<Interaction.Behaviors>
									<DataTriggerBehavior Binding="{Binding IsVisible, ElementName=DebugWindow}" ComparisonCondition="Equal" Value="True">
										<ChangePropertyAction PropertyName="Data" Value="M18,7H15.19C14.74,6.2 14.12,5.5 13.37,5L15,3.41L13.59,2L11.42,4.17C10.96,4.06 10.5,4 10,4C9.5,4 9.05,4.06 8.59,4.17L6.41,2L5,3.41L6.62,5C5.87,5.5 5.26,6.21 4.81,7H2V9H4.09C4.03,9.33 4,9.66 4,10V11H2V13H4V14C4,14.34 4.03,14.67 4.09,15H2V17H4.81C6.26,19.5 9.28,20.61 12,19.65C12,19.43 12,19.22 12,19C12,16.46 13.61,14.2 16,13.35V13H18V11H16V10C16,9.66 15.97,9.33 15.91,9H18V7M12,15H8V13H12V15M12,11H8V9H12V11M17.75,22.16L15,19.16L16.16,18L17.75,19.59L21.34,16L22.5,17.41L17.75,22.16Z" />
									</DataTriggerBehavior>
									<DataTriggerBehavior Binding="{Binding IsVisible, ElementName=DebugWindow}" ComparisonCondition="Equal" Value="False">
										<ChangePropertyAction PropertyName="Data" Value="M20,8H17.19C16.74,7.2 16.12,6.5 15.37,6L17,4.41L15.59,3L13.42,5.17C12.96,5.06 12.5,5 12,5C11.5,5 11.05,5.06 10.59,5.17L8.41,3L7,4.41L8.62,6C7.87,6.5 7.26,7.21 6.81,8H4V10H6.09C6.03,10.33 6,10.66 6,11V12H4V14H6V15C6,15.34 6.03,15.67 6.09,16H4V18H6.81C8.47,20.87 12.14,21.84 15,20.18C15.91,19.66 16.67,18.9 17.19,18H20V16H17.91C17.97,15.67 18,15.34 18,15V14H20V12H18V11C18,10.66 17.97,10.33 17.91,10H20V8M16,15A4,4 0 0,1 12,19A4,4 0 0,1 8,15V11A4,4 0 0,1 12,7A4,4 0 0,1 16,11V15M14,10V12H10V10H14M10,14H14V16H10V14Z" />
									</DataTriggerBehavior>
								</Interaction.Behaviors>
							</PathIcon>
						</Viewbox>
					</Button>

				</StackPanel>

			</Grid>
		</Border>

	</Grid>

</Window>
